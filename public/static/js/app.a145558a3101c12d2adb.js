webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),r=o("3EgV"),s=o.n(r),i=o("9JMe"),a=o("NYxO"),c=o("mtWM"),d=o.n(c).a.create({baseURL:"http://localhost:8000/api"});function u(t){d.defaults.headers={Authorization:"Bearer "+t}}var l={state:{token:null,error:null},mutations:{loginSuccess:function(t,e){var o=e.token;t.token=o,t.error=null},loginFailed:function(t){t.token=null,t.error="failed to login"},signUpSuccess:function(t,e){var o=e.token;t.token=o,t.error=null},signUpFailed:function(t){t.token=null,t.error="faild to register"}},actions:{init:function(t){t.commit;u(localStorage.getItem("token")||null)},login:function(t,e){var o=t.commit,n=e.router,r=e.user;d.post("/login",r).then(function(t){o("loginSuccess",{token:t.data.token}),u(t.data.token),localStorage.setItem("token",t.data.token),n.push("/home")}).catch(function(t){o("loginFailed")})},signUp:function(t,e){var o=t.commit,n=e.router,r=e.user;d.post("/register",r).then(function(t){o("signUpSuccess",{token:t.data.token}),u(t.data.token),localStorage.setItem("token",t.data.token),n.push("/home")}).catch(function(t){o("signUpFailed")})},validate:function(t,e){t.commit;var o=t.state,n=e.router,r=e.to,s=o.token;d.get("/validate",{token:s}).then(function(){void 0!==r&&n.push(r)}).catch(function(t){n.push("/")})},deleteAccount:function(t,e){t.commit;var o=t.state,n=e.router,r=o.token;d.post("/deleteAccount",{token:r}).then(function(){n.push("/")})}}},f=o("woOf"),v=o.n(f),p={state:{todos:[]},mutations:{addTodos:function(t,e){var o=e.todos;t.todos=[],o.forEach(function(e){return t.todos.push(e)})},addTodo:function(t,e){var o=e.todo;t.todos.unshift(o)},doneTodo:function(t,e){var o=e.id,r=t.todos.findIndex(function(t){return t.id==o}),s=t.todos[r];void 0!=s&&(s.done=!0),n.a.set(t.todos,r,s)},deleteTodo:function(t,e){var o=e.id;t.todos=t.todos.filter(function(t){return t.id!=o})}},actions:{init:function(t,e){var o=t.commit;d.get("/todos").then(function(t){o("addTodos",{todos:t.data})})},addTodo:function(t,e){var o=t.commit;e.done=!1,d.post("/todos",e).then(function(t){e.id=t.data.id,o("addTodo",{todo:e})})},doneTodo:function(t,e){var o=t.commit,n=t.state.todos.find(function(t){return t.id==e});d.put("/todos/"+e,v()({},n,{done:!0})).then(function(t){o("doneTodo",{id:e})})},deleteTodo:function(t,e){var o=t.commit;d.delete("/todos/"+e,e).then(function(t){o("deleteTodo",{id:e})})}}};n.a.use(a.a);var h=new a.a.Store({modules:{auth:l,todo:p}}),m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"app"}},[e("v-container",{attrs:{"grid-list-xs":""}},[e("router-view")],1)],1)},staticRenderFns:[]};var _=o("VU/8")({mounted:function(){this.$store.dispatch("validate",{router:this.$router,to:"/home"})}},m,!1,function(t){o("jDTr")},null,null).exports,k=o("/ocq"),x={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{"justify-center":""}},[o("div",{staticClass:"todo"},[o("v-layout",[o("v-text-field",{attrs:{label:"todo"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),o("v-btn",{on:{click:function(e){t.$store.dispatch("addTodo",{title:t.title}),t.title=""}}},[t._v("Add")])],1),t._v(" "),o("ul",t._l(t.todos,function(e){return o("li",{key:e.id},[o("v-layout",[o("v-flex",{staticClass:"done",attrs:{xs2:""},on:{click:function(o){t.$store.dispatch("doneTodo",e.id)}}},[t._v("✓")]),t._v(" "),o("v-flex",{staticClass:"text-xs-left",attrs:{xs8:""}},[t._v(t._s(e.title))]),t._v(" "),o("v-flex",{staticClass:"delete",attrs:{xs2:""},on:{click:function(o){t.$store.dispatch("deleteTodo",e.id)}}},[t._v("✗")])],1)],1)})),t._v(" "),o("ul",t._l(t.doneTodos,function(e){return o("li",{key:e.id},[o("v-layout",[o("v-flex",{attrs:{xs2:""}}),t._v(" "),o("v-flex",{staticClass:"text-xs-left doned",attrs:{xs8:""}},[t._v(t._s(e.title))]),t._v(" "),o("v-flex",{staticClass:"delete",attrs:{xs2:""},on:{click:function(o){t.$store.dispatch("deleteTodo",e.id)}}},[t._v("✗")])],1)],1)})),t._v(" "),o("p",{staticClass:"deleteAccount",on:{click:function(e){t.$store.dispatch("deleteAccount",{router:t.$router})}}},[t._v("delete account")])],1)])},staticRenderFns:[]};var g=o("VU/8")({data:function(){return{title:""}},computed:{todos:function(){return this.$store.state.todo.todos.filter(function(t){return!t.done})},doneTodos:function(){return this.$store.state.todo.todos.filter(function(t){return t.done})}},created:function(){this.$store.dispatch("validate",{router:this.$router}),this.$store.dispatch("init")}},x,!1,function(t){o("vowv")},"data-v-1bdc384d",null).exports,w={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{xs3:"","justify-center":"","align-center":""}},[o("v-form",{staticClass:"form"},[o("v-text-field",{attrs:{label:"E-Mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),o("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),o("v-btn",{on:{click:function(e){t.$store.dispatch("login",{router:t.$router,user:{email:t.email,password:t.password}})}}},[t._v("Login")]),t._v(" "),o("v-btn",{on:{click:function(e){t.$router.push("register")}}},[t._v("Register")]),t._v(" "),t.showError?o("div",{staticClass:"errorMessage"},[t._v(t._s(t.error))]):t._e()],1)],1)},staticRenderFns:[]};var $=o("VU/8")({data:function(){return{email:"",password:""}},computed:{showError:function(){return null!=this.$store.state.auth.error},error:function(){return this.$store.state.auth.error}}},w,!1,function(t){o("sqA8")},"data-v-883fcd32",null).exports,T={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{xs3:"","justify-center":"","align-center":""}},[o("v-form",{staticClass:"form"},[o("v-text-field",{attrs:{label:"E-Mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),o("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),o("v-btn",{on:{click:function(e){t.$store.dispatch("signUp",{router:t.$router,user:{email:t.email,password:t.password}})}}},[t._v("Sign up")]),t._v(" "),t.showError?o("div",{staticClass:"errorMessage"},[t._v(t._s(t.error))]):t._e()],1)],1)},staticRenderFns:[]};var b=o("VU/8")({data:function(){return{email:"",password:""}},computed:{showError:function(){return null!=this.$store.state.auth.error},error:function(){return this.$store.state.auth.error}}},T,!1,function(t){o("SvnP")},"data-v-15fac2e2",null).exports;n.a.use(k.a);var y=new k.a({routes:[{path:"/",component:$},{path:"/register",component:b},{path:"/home",component:g}]});o("j1ja"),o("7zck");n.a.use(s.a),n.a.config.productionTip=!1,Object(i.sync)(h,y),new n.a({el:"#app",router:y,store:h,components:{App:_},template:"<App/>"})},SvnP:function(t,e){},jDTr:function(t,e){},sqA8:function(t,e){},vowv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a145558a3101c12d2adb.js.map